<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>招行企业慧眼</title>
    <link rel="stylesheet" href="../css/mui.css">
    <link rel="stylesheet" href="../iconfont/iconfont.css">
    <link rel="stylesheet" href="../css/swiper.min.css">
    <link rel="stylesheet" href="../css/public.css">
    <script src="../js/swiper.min.js"></script>
    <script type="text/javascript" src="../js/flex.js"></script>
</head>
<body>
<header class="mui-bar mui-bar-nav white_bar_nav">
    <a class="mui-action-back mui-icon mui-pull-left iconfont icon-back"></a>
    <h1 class="mui-title">企业动态</h1>
</header>
<div class="mui-content graybc c-dynamic-wrapper">
    <div class="info-list-wrapper">
        <div class="swiper-container" id="scrollNav">
            <div class="tabs swiper-wrapper">
                <a href="#" class="swiper-slide active"><span class="innertxt">全部</span></a>
                <a href="#" class="swiper-slide"><span class="innertxt">新闻舆情</span></a>
                <a href="#" class="swiper-slide"><span class="innertxt">招投标</span></a>
                <a href="#" class="swiper-slide"><span class="innertxt">工商变更</span></a>
                <a href="#" class="swiper-slide"><span class="innertxt">法院公告</span></a>
            </div>
        </div>
        <div id="tabs-container" class="swiper-container">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <ul class="zh-timeline-wrapper">
                        <li class="timenode">
                            <div class="time-txt">
                                <span class="txt">2019-04-28 16:50</span>
                            </div>
                            <div class="dynamic-labels clearfix">
                                <span class="label-first label-xwyq"><i class="innertxt">新闻舆情</i><input type="text" value="新闻舆情" readonly></span>
                                <span class="label-infotype negative"><i class="innertxt">负面</i><input type="text" value="负面" readonly></span>
                            </div>
                            <a href="" class="info-innertxt">
                                <h5>华为5G的未来和它的三种挑战</h5>
                                <p class="txt">过去几年随着2G升级至3G、4G时代，曾经的行业霸主诺基亚，因无法阻挡行业当中翻天覆地的变化而走向衰落</p>
                                <div class="info-source">蓝鲸财经</div>
                            </a>
                        </li>
                        <li class="timenode">
                            <div class="time-txt">
                                <span class="txt">2019-04-28 16:50</span>
                            </div>
                            <div class="dynamic-labels clearfix">
                                <span class="label-first label-xwyq"><i class="innertxt">新闻舆情</i><input type="text" value="新闻舆情" readonly></span>
                                <span class="label-infotype negative"><i class="innertxt">负面</i><input type="text" value="负面" readonly></span>
                            </div>
                            <a href="" class="info-innertxt">
                                <h5>华为5G的未来和它的三种挑战</h5>
                                <p class="txt">过去几年随着2G升级至3G、4G时代，曾经的行业霸主诺基亚，因无法阻挡行业当中翻天覆地的变化而走向衰落</p>
                                <div class="info-source">蓝鲸财经</div>
                            </a>
                        </li>
                        <li class="timenode">
                            <div class="time-txt">
                                <span class="txt">2019-04-28 16:50</span>
                            </div>
                            <div class="dynamic-labels clearfix">
                                <span class="label-first label-gsbg"><i class="innertxt">工商变更</i><input type="text" value="工商变更" readonly></span>
                                <span class="label-infotype neutral"><i class="innertxt">中性</i><input type="text" value="中性" readonly></span>
                            </div>
                            <a href="" class="info-innertxt">
                                <h5>华为5G的未来和它的三种挑战</h5>
                                <p class="txt">过去几年随着2G升级至3G、4G时代，曾经的行业霸主诺基亚，因无法阻挡行业当中翻天覆地的变化而走向衰落</p>
                                <div class="info-source">蓝鲸财经</div>
                            </a>
                        </li>
                        <li class="timenode">
                            <div class="time-txt">
                                <span class="txt">2019-04-28 16:50</span>
                            </div>
                            <div class="dynamic-labels clearfix">
                                <span class="label-first label-fygg"><i class="innertxt">法院公告</i><input type="text" value="法院公告" readonly></span>
                                <span class="label-infotype positive"><i class="innertxt">正面</i><input type="text" value="正面" readonly></span>
                            </div>
                            <a href="" class="info-innertxt">
                                <h5>华为5G的未来和它的三种挑战</h5>
                                <p class="txt">过去几年随着2G升级至3G、4G时代，曾经的行业霸主诺基亚，因无法阻挡行业当中翻天覆地的变化而走向衰落</p>
                                <div class="info-source">蓝鲸财经</div>
                            </a>
                        </li>
                        <li class="timenode">
                            <div class="time-txt">
                                <span class="txt">2019-04-28 16:50</span>
                            </div>
                            <div class="dynamic-labels clearfix">
                                <span class="label-first label-ztb"><i class="innertxt">招投标</i><input type="text" value="招投标" readonly></span>
                            </div>
                            <a href="" class="info-innertxt">
                                <h5>华为5G的未来和它的三种挑战</h5>
                                <p class="txt">过去几年随着2G升级至3G、4G时代，曾经的行业霸主诺基亚，因无法阻挡行业当中翻天覆地的变化而走向衰落</p>
                                <div class="info-source">蓝鲸财经</div>
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="swiper-slide">
                    2
                </div>
                <div class="swiper-slide">
                    3
                </div>
                <div class="swiper-slide">
                    4
                </div>
                <div class="swiper-slide">5</div>
            </div>
        </div>
    </div>
</div>
<script src="../js/mui.js"></script>
<script src="../js/app.js"></script>
<script src="../js/jquery-1.11.3.min.js"></script>
<script type="text/javascript">

    /*scrolltab*/
    tSpeed = 500;
    var navSwiper = new Swiper('#scrollNav', {
        slidesPerView :'auto',
        spaceBetween : 0,
        slidesPerGroup : 2,
        slidesOffsetAfter : 0,
        /*  slidesPerView: 2,
          freeMode: true,*/
        /* speed: tSpeed,*/
        on:{
            init: function() {
                clientWidth = parseInt(this.$wrapperEl.css('width'));
                navWidth = 0;
                for (i = 0; i < this.slides.length; i++) {
                    navWidth += parseInt(this.slides.eq(i).css('width'));
                }
            }
        }

    });

    var tabsSwiper = new Swiper('#tabs-container', {
        speed: tSpeed,
        on: {
            slideChangeTransitionStart: function() {
                $(".tabs .active").removeClass('active');
                $(".tabs a").eq(this.activeIndex).addClass('active');
            },
            transitionStart:function () {
                activeIndex = this.activeIndex;

                //导航居中
                navActiveSlideLeft = navSwiper.slides[activeIndex].offsetLeft;//activeSlide距左边的距离
                var navSlideWidth = $('#scrollNav').find('.swiper-slide').eq(activeIndex).css('width');
                navSwiper.setTransition(tSpeed)
                if (navActiveSlideLeft < (clientWidth - parseInt(navSlideWidth)) / 2) {
                    navSwiper.setTranslate(0);
                } else if (navActiveSlideLeft > navWidth - (parseInt(navSlideWidth) + clientWidth) / 2) {
                    if(navWidth <= clientWidth ){
                        console.log("bugun")
                    }else {
                        navSwiper.setTranslate(clientWidth - navWidth)
                    }
                } else {
                    navSwiper.setTranslate((clientWidth - parseInt(navSlideWidth)) / 2 - navActiveSlideLeft)
                }
            }
        }
    });

    navSwiper.$el.on('touchstart', function(e) {
        e.preventDefault() //去掉按压阴影
    })
    navSwiper.on('tap', function(e) {
        clickIndex = this.clickedIndex;
        clickSlide = this.slides.eq(clickIndex);
        tabsSwiper.slideTo(clickIndex,tSpeed );
    })
</script>

</body>
</html>